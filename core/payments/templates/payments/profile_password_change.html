<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>پروفایل و تغییر رمز عبور</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" type="text/css">
    <style>
        body { font-family: Vazir, sans-serif; direction: rtl; background: #f5f6f8; padding: 24px; }
        .box { max-width: 520px; margin: 0 auto; background: #fff; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,.12); }
        h2 { margin-top: 0; text-align: center; }
        .note { background: #fff3cd; color: #7a5300; border-radius: 8px; padding: 10px; margin-bottom: 12px; font-size: 13px; }
        input { width: 100%; padding: 9px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; margin-top: 4px; margin-bottom: 10px; }
        ul.errorlist { margin: 0 0 8px 0; color: #c62828; }
        button, .back-link { border: none; border-radius: 6px; padding: 9px 12px; cursor: pointer; text-decoration: none; display: inline-block; }
        button { background: #0d6efd; color: #fff; }
        .back-link { background: #6c757d; color: #fff; margin-right: 8px; }
        .msg { border-radius: 6px; padding: 8px; margin-bottom: 10px; font-size: 13px; }
        .msg-success { background: #e8f5e9; color: #1b5e20; }
        .msg-error { background: #ffebee; color: #b71c1c; }
        .actions { margin-top: 8px; }
    </style>
</head>
<body>
    <div class="box">
        <h2>پروفایل و تغییر رمز عبور</h2>
        <div class="note">نام کاربری: <strong>{{ username }}</strong></div>
        {% if is_force_change %}
            <div class="note">به دلایل امنیتی، در اولین ورود باید رمز عبور خود را تغییر دهید.</div>
        {% endif %}

        {% if messages %}
            {% for message in messages %}
                <div class="msg {% if 'success' in message.tags %}msg-success{% else %}msg-error{% endif %}">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <div class="actions">
                <button type="submit" name="action" value="save">ثبت رمز جدید</button>
                <button type="submit" name="action" value="cancel" class="back-link">انصراف</button>
            </div>
        </form>
    </div>
</body>
</html>
